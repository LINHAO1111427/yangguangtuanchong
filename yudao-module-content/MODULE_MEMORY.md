# å¾®æœåŠ¡ Memory - contentï¼ˆå†…å®¹ç®¡ç†æ¨¡å—ï¼‰

[â¬…ï¸ è¿”å›é¡¹ç›®æ€»è§ˆ](../../PROJECT_MEMORY.md)

**ä¾èµ–æ¨¡å—**ï¼š[member](../yudao-module-member/MODULE_MEMORY.md)ï¼ˆç”¨æˆ·ä¿¡æ¯ï¼‰ â€¢ [infra](../yudao-module-infra/MODULE_MEMORY.md)ï¼ˆæ–‡ä»¶ä¸Šä¼ ã€å®¡æ ¸ï¼‰

---

## ğŸ”´ å¼ºåˆ¶è§„åˆ™
1. **æ‰€æœ‰å‘å¸ƒå†…å®¹å¿…é¡»ç»è¿‡å†…å®¹å®¡æ ¸**
2. **è§†é¢‘å’Œå›¾æ–‡å¿…é¡»ç»Ÿä¸€ç®¡ç†ï¼Œä¸èƒ½åˆ†å¼€å­˜å‚¨**
3. **æ¨èç®—æ³•å¿…é¡»æ”¯æŒå¤šç§ç­–ç•¥ç»„åˆ**
4. **è¯„è®ºå¿…é¡»æ”¯æŒå›¾ç‰‡/è§†é¢‘/GIF+æ–‡å­—**
5. **å¹¿å‘Šå†…å®¹å¿…é¡»æ ‡è¯†æ¸…æ¥šï¼Œä¸èƒ½è¯¯å¯¼ç”¨æˆ·**
6. **âœ… æœç´¢ç»“æœå¿…é¡»æŒ‰ç±»å‹Tabåˆ†ç±»æ˜¾ç¤ºï¼ˆå…¨éƒ¨/æ¨è/ç”¨æˆ·/è¯é¢˜ï¼‰**
7. **âœ… çƒ­æ¨æœºåˆ¶å¿…é¡»æ”¯æŒè‡ªè´¹æ¨çƒ­å’Œæ‰“èµæ¨çƒ­ä¸¤ç§æ–¹å¼**
8. **PostgreSQL pagination must use LIMIT {limit} OFFSET {offset}; do not use LIMIT offset, limit**
9. **The deleted column is int2(0/1); SQL must use deleted = 0/1, not boolean**
10. **RPC API implementations must use @RestController (not only @Service) to expose endpoints**

## ğŸ“‹ æ¨¡å—å¿«é€Ÿç†è§£
- **ä¸€å¥è¯æè¿°**ï¼šç®¡ç†ç”¨æˆ·å‘å¸ƒçš„è§†é¢‘/å›¾æ–‡å†…å®¹ã€è¯„è®ºäº’åŠ¨ã€æ¨èFeedæµã€æœç´¢åŠŸèƒ½
- **æ ¸å¿ƒèŒè´£**ï¼šå†…å®¹å‘å¸ƒä¸å®¡æ ¸ + ç¤¾äº¤äº’åŠ¨ + æ¨èç®—æ³• + å…¨æ–‡æœç´¢
- **æœåŠ¡ç«¯å£**ï¼š48083
- **æ•°æ®åº“**ï¼šcontent_dbï¼ˆå†…å®¹åº“ï¼‰

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„
### ä¾èµ–å…³ç³»
```
content â†’ memberï¼ˆç”¨æˆ·ä¿¡æ¯ï¼‰
content â†’ infraï¼ˆæ–‡ä»¶ä¸Šä¼ ã€å†…å®¹å®¡æ ¸ï¼‰
content â†’ Elasticsearchï¼ˆå…¨æ–‡æœç´¢ï¼‰
```

### é¡¹ç›®ç»“æ„
```
yudao-module-content/
â”œâ”€â”€ yudao-module-content-api/      # APIæ¥å£å®šä¹‰
â”‚   â””â”€â”€ cn.iocoder.yudao.module.content.api/
â”‚       â”œâ”€â”€ post/                  # å†…å®¹API
â”‚       â””â”€â”€ comment/               # è¯„è®ºAPI
â”œâ”€â”€ yudao-module-content-biz/      # ä¸šåŠ¡å®ç°
â”‚   â””â”€â”€ cn.iocoder.yudao.module.content/
â”‚       â”œâ”€â”€ controller/
â”‚       â”‚   â”œâ”€â”€ app/               # Cç«¯APPæ¥å£
â”‚       â”‚   â”‚   â”œâ”€â”€ post/          # å†…å®¹æ¥å£
â”‚       â”‚   â”‚   â”œâ”€â”€ comment/       # è¯„è®ºæ¥å£
â”‚       â”‚   â”‚   â”œâ”€â”€ like/          # ç‚¹èµæ¥å£
â”‚       â”‚   â”‚   â”œâ”€â”€ favorite/      # æ”¶è—æ¥å£
â”‚       â”‚   â”‚   â””â”€â”€ recommend/     # æ¨èæ¥å£
â”‚       â”‚   â””â”€â”€ admin/             # ç®¡ç†åå°æ¥å£
â”‚       â”œâ”€â”€ service/
â”‚       â”‚   â”œâ”€â”€ post/              # å†…å®¹æœåŠ¡
â”‚       â”‚   â”‚   â”œâ”€â”€ ContentPostService.java       # å†…å®¹å‘å¸ƒæœåŠ¡
â”‚       â”‚   â”‚   â””â”€â”€ ContentAuditService.java      # å†…å®¹å®¡æ ¸æœåŠ¡
â”‚       â”‚   â”œâ”€â”€ comment/           # è¯„è®ºæœåŠ¡
â”‚       â”‚   â”œâ”€â”€ like/              # ç‚¹èµæœåŠ¡
â”‚       â”‚   â”œâ”€â”€ favorite/          # æ”¶è—æœåŠ¡
â”‚       â”‚   â”œâ”€â”€ recommend/         # æ¨èæœåŠ¡
â”‚       â”‚   â”‚   â””â”€â”€ ContentRecommendService.java  # æ¨èç®—æ³•æœåŠ¡
â”‚       â”‚   â””â”€â”€ search/            # æœç´¢æœåŠ¡
â”‚       â”‚       â”œâ”€â”€ ContentSearchService.java     # å†…å®¹æœç´¢æœåŠ¡ï¼ˆESï¼‰
â”‚       â”‚       â””â”€â”€ UserSearchService.java        # ç”¨æˆ·æœç´¢æœåŠ¡ï¼ˆESï¼‰
â”‚       â”œâ”€â”€ dal/
â”‚       â”‚   â”œâ”€â”€ dataobject/        # æ•°æ®å¯¹è±¡
â”‚       â”‚   â”‚   â”œâ”€â”€ ContentPostDO.java            # å†…å®¹å®ä½“ï¼ˆå«15ä¸ªè§†é¢‘æ‰©å±•å­—æ®µï¼‰
â”‚       â”‚   â”‚   â”œâ”€â”€ ContentCommentDO.java         # è¯„è®ºå®ä½“
â”‚       â”‚   â”‚   â””â”€â”€ ContentTopicDO.java           # è¯é¢˜å®ä½“
â”‚       â”‚   â””â”€â”€ mysql/             # Mapper
â”‚       â””â”€â”€ job/
â”‚           â””â”€â”€ HotScoreUpdateJob.java            # çƒ­åº¦åˆ†æ•°å®šæ—¶æ›´æ–°ä»»åŠ¡
```

## ğŸš€ å·²å®ç°åŠŸèƒ½

### âœ… å†…å®¹å‘å¸ƒï¼ˆ100%ï¼‰
- **ContentPostService.java**ï¼šå†…å®¹å‘å¸ƒæœåŠ¡
  - å‘å¸ƒå›¾æ–‡å†…å®¹
  - å‘å¸ƒè§†é¢‘å†…å®¹ï¼ˆå«15ä¸ªæ‰©å±•å­—æ®µï¼‰
  - è¯é¢˜æ ‡ç­¾å…³è”
  - å®šä½ä¿¡æ¯è®°å½•
  - @åŠŸèƒ½
  - è‰ç¨¿ä¿å­˜

- **ContentAuditService.java**ï¼šå†…å®¹å®¡æ ¸æœåŠ¡
  - è‡ªåŠ¨å®¡æ ¸ï¼ˆè°ƒç”¨è…¾è®¯å†…å®¹å®‰å…¨APIï¼‰
  - äººå·¥å®¡æ ¸ï¼ˆç®¡ç†åå°ï¼‰
  - å®¡æ ¸çŠ¶æ€ï¼šå¾…å®¡æ ¸/é€šè¿‡/æ‹’ç»/ä¸‹æ¶
  - æ•æ„Ÿè¯è¿‡æ»¤

- **å‘å¸ƒæ¥å£**ï¼š`AppContentPostController.java`
  ```
  POST /api/v1.0.1/content/post/publish           # å‘å¸ƒå†…å®¹
  PUT  /api/v1.0.1/content/post/update            # ä¿®æ”¹å†…å®¹
  DELETE /api/v1.0.1/content/post/delete          # åˆ é™¤å†…å®¹
  GET  /api/v1.0.1/content/post/detail            # å†…å®¹è¯¦æƒ…
  GET  /api/v1.0.1/content/post/my-posts          # æˆ‘çš„ä½œå“
  POST /api/v1.0.1/content/post/save-draft        # ä¿å­˜è‰ç¨¿
  GET  /api/v1.0.1/content/post/draft-list        # è‰ç¨¿åˆ—è¡¨
  ```

### âœ… æ¨èç®—æ³•ï¼ˆ100%ï¼‰
- **ContentRecommendService.java**ï¼šæ¨èç®—æ³•æœåŠ¡ï¼ˆ700+è¡Œï¼‰
  - **æ··åˆæ¨èç­–ç•¥**ï¼š40%ååŒè¿‡æ»¤ + 30%çƒ­åº¦æ’åº + 20%æ ‡ç­¾åŒ¹é… + 10%éšæœºæ¢ç´¢
  - è·å–ä¸ªæ€§åŒ–æ¨èFeedæµ
  - è®°å½•ç”¨æˆ·è¡Œä¸ºï¼ˆview/like/favorite/shareï¼‰
  - æ›´æ–°å†…å®¹çƒ­åº¦åˆ†æ•°ï¼ˆåŠ æƒå…¬å¼ï¼‰
  - ååŒè¿‡æ»¤æ¨èï¼ˆåŸºäºç›¸ä¼¼ç”¨æˆ·ï¼‰
  - çƒ­é—¨å†…å®¹åˆ—è¡¨ï¼ˆRedis ZSetå­˜å‚¨ï¼‰
  - æŸ¥æ‰¾ç›¸ä¼¼ç”¨æˆ·ï¼ˆç®€åŒ–ç‰ˆï¼‰

- **æ¨èæ¥å£**ï¼š`AppContentRecommendController.java`
  ```
  GET  /api/v1.0.1/content/recommend/feed                  # è·å–æ¨èFeedæµ
  GET  /api/v1.0.1/content/recommend/hot                   # è·å–çƒ­é—¨å†…å®¹
  POST /api/v1.0.1/content/recommend/behavior              # è®°å½•ç”¨æˆ·è¡Œä¸º
  POST /api/v1.0.1/content/recommend/update-hot-score      # æ›´æ–°å†…å®¹çƒ­åº¦
  POST /api/v1.0.1/content/recommend/batch-update-hot-score # æ‰¹é‡æ›´æ–°çƒ­åº¦
  POST /api/v1.0.1/content/recommend/refresh-cache         # åˆ·æ–°æ¨èç¼“å­˜
  ```

### âœ… å…¨æ–‡æœç´¢ï¼ˆ100%ï¼‰
- **ContentSearchService.java**ï¼šå†…å®¹æœç´¢æœåŠ¡ï¼ˆ700+è¡Œï¼ŒåŸºäºElasticsearchï¼‰
  - è‡ªåŠ¨åˆ›å»ºå†…å®¹ç´¢å¼•ï¼ˆIKåˆ†è¯å™¨ï¼‰
  - å†…å®¹å…¨æ–‡æœç´¢ï¼ˆæ ‡é¢˜^3+æ­£æ–‡^1æƒé‡ï¼‰
  - ç´¢å¼•å†…å®¹æ–‡æ¡£
  - æ‰¹é‡ç´¢å¼•
  - æ›´æ–°å†…å®¹
  - åˆ é™¤å†…å®¹
  - è·å–çƒ­é—¨æœç´¢è¯ï¼ˆRedis ZSetç»Ÿè®¡ï¼‰
  - ä¿å­˜æœç´¢å†å²ï¼ˆRedis Listï¼Œä¿ç•™20æ¡ï¼‰
  - æ¸…é™¤æœç´¢å†å²
  - **æœç´¢ç‰¹æ€§**ï¼šé«˜äº®æ˜¾ç¤ºã€ç›¸å…³åº¦æ’åºã€æ—¶é—´æ’åºã€çƒ­åº¦æ’åºï¼ˆè„šæœ¬æ’åºï¼‰
  - **è¿‡æ»¤æ¡ä»¶**ï¼šå†…å®¹ç±»å‹ã€ç”¨æˆ·IDã€æ ‡ç­¾åˆ—è¡¨

- **UserSearchService.java**ï¼šç”¨æˆ·æœç´¢æœåŠ¡ï¼ˆ500+è¡Œï¼ŒåŸºäºElasticsearchï¼‰
  - è‡ªåŠ¨åˆ›å»ºç”¨æˆ·ç´¢å¼•ï¼ˆIKåˆ†è¯å™¨ï¼‰
  - ç”¨æˆ·å…¨æ–‡æœç´¢ï¼ˆæ˜µç§°^3+ç®€ä»‹^1æƒé‡ï¼‰
  - æ ¹æ®custom_idç²¾ç¡®æœç´¢
  - **æœç´¢ç‰¹æ€§**ï¼šé«˜äº®æ˜¾ç¤ºã€ç›¸å…³åº¦æ’åºã€ç²‰ä¸æ•°æ’åºã€ä½œå“æ•°æ’åº
  - **è¿‡æ»¤æ¡ä»¶**ï¼šæ€§åˆ«ã€è®¤è¯çŠ¶æ€ã€æ ‡ç­¾åˆ—è¡¨

- **æœç´¢æ¥å£**ï¼š`AppSearchController.java`
  ```
  GET /api/v1.0.1/search/content                  # æœç´¢å†…å®¹
  GET /api/v1.0.1/search/user                     # æœç´¢ç”¨æˆ·
  GET /api/v1.0.1/search/user/by-custom-id        # æ ¹æ®custom_idæœç´¢ç”¨æˆ·
  GET /api/v1.0.1/search/hot-keywords             # è·å–çƒ­é—¨æœç´¢è¯
  GET /api/v1.0.1/search/history                  # è·å–æœç´¢å†å²
  DELETE /api/v1.0.1/search/history               # æ¸…é™¤æœç´¢å†å²
  GET /api/v1.0.1/search/all                      # ç»¼åˆæœç´¢ï¼ˆå†…å®¹+ç”¨æˆ·ï¼‰
  ```

### âœ… è¯„è®ºç³»ç»Ÿï¼ˆ100%ï¼‰
- **ContentCommentService.java**ï¼šè¯„è®ºæœåŠ¡
  - å‘è¡¨è¯„è®ºï¼ˆæ–‡å­—+å›¾ç‰‡/è§†é¢‘/GIFï¼‰
  - å›å¤è¯„è®º
  - åˆ é™¤è¯„è®º
  - è¯„è®ºåˆ—è¡¨ï¼ˆæŒ‰çƒ­åº¦/æ—¶é—´æ’åºï¼‰
  - è¯„è®ºæ•°ç»Ÿè®¡

- **è¯„è®ºæ¥å£**ï¼š`AppContentCommentController.java`
  ```
  POST /api/v1.0.1/content/comment/publish        # å‘è¡¨è¯„è®º
  POST /api/v1.0.1/content/comment/reply          # å›å¤è¯„è®º
  DELETE /api/v1.0.1/content/comment/delete       # åˆ é™¤è¯„è®º
  GET  /api/v1.0.1/content/comment/list           # è¯„è®ºåˆ—è¡¨
  ```

### âœ… ç‚¹èµæ”¶è—ï¼ˆ100%ï¼‰
- **ContentLikeService.java**ï¼šç‚¹èµæœåŠ¡
  - ç‚¹èµ/å–æ¶ˆç‚¹èµ
  - ç‚¹èµåˆ—è¡¨
  - ç‚¹èµæ•°ç»Ÿè®¡
  - ç‚¹èµè®°å½•ï¼ˆåˆ†ç»„æ ‡ç­¾ï¼‰

- **ContentFavoriteService.java**ï¼šæ”¶è—æœåŠ¡
  - æ”¶è—/å–æ¶ˆæ”¶è—
  - æ”¶è—åˆ—è¡¨
  - æ”¶è—åˆ†ç»„ç®¡ç†
  - æ”¶è—æ•°ç»Ÿè®¡

- **äº’åŠ¨æ¥å£**ï¼š`AppContentInteractionController.java`
  ```
  POST /api/v1.0.1/content/like/like              # ç‚¹èµ
  POST /api/v1.0.1/content/like/unlike            # å–æ¶ˆç‚¹èµ
  GET  /api/v1.0.1/content/like/list              # ç‚¹èµåˆ—è¡¨
  POST /api/v1.0.1/content/favorite/favorite      # æ”¶è—
  POST /api/v1.0.1/content/favorite/unfavorite    # å–æ¶ˆæ”¶è—
  GET  /api/v1.0.1/content/favorite/list          # æ”¶è—åˆ—è¡¨
  POST /api/v1.0.1/content/favorite/create-group  # åˆ›å»ºæ”¶è—åˆ†ç»„
  ```

### âš ï¸ å¾…å®Œå–„åŠŸèƒ½

#### çƒ­æ¨æœºåˆ¶ï¼ˆ0%ï¼‰- P1ä¼˜å…ˆçº§ âœ… æ–°å¢
**éœ€æ±‚**ï¼šæ”¯æŒå†…å®¹è‡ªè´¹æ¨çƒ­æˆ–é€šè¿‡æ‰“èµæ¨çƒ­ä¸¤ç§æ–¹å¼
- **è‡ªè´¹æ¨çƒ­**ï¼šåˆ›ä½œè€…å……å€¼ä½™é¢åï¼Œå¯èŠ±è´¹ä¸€å®šé‡‘é¢æ¨çƒ­å†…å®¹
- **æ‰“èµæ¨çƒ­**ï¼šå½“å†…å®¹è¢«æ‰“èµåˆ°ä¸€å®šé‡‘é¢ï¼ˆå¦‚500å…ƒï¼‰åï¼Œè‡ªåŠ¨æ¨çƒ­
- æ¨çƒ­å†…å®¹åœ¨æ¨èFeedæµä¸­è·å¾—æ›´é«˜æƒé‡
- æ¨çƒ­æ—¶é—´å¯é…ç½®ï¼ˆ1å¤©/3å¤©/7å¤©/30å¤©ï¼‰
- æ¨çƒ­æ•°æ®ç»Ÿè®¡ï¼ˆå±•ç¤ºé‡ã€ç‚¹å‡»ç‡ã€ROIï¼‰

**è¡¨è®¾è®¡**ï¼š
- `content_promote_record` è¡¨ï¼ˆæ¨çƒ­è®°å½•è¡¨ï¼‰
  - promote_idã€post_idã€promote_typeï¼ˆ1è‡ªè´¹/2æ‰“èµï¼‰ã€costã€promote_daysã€start_timeã€end_time
  - ç´¢å¼•ï¼šidx_post_id, idx_start_time, idx_promote_type
- `content_promote_stat` è¡¨ï¼ˆæ¨çƒ­ç»Ÿè®¡è¡¨ï¼‰
  - promote_idã€impressionsã€clicksã€ctrï¼ˆç‚¹å‡»ç‡ï¼‰

**æ¨èç®—æ³•ä¿®æ­£**ï¼š
- æ¨çƒ­ä¸­çš„å†…å®¹æƒé‡æå‡ 50%
- ç»“åˆåŸæœ‰çš„40%ååŒ+30%çƒ­åº¦+20%æ ‡ç­¾+10%éšæœºç®—æ³•

**APIæ¥å£**ï¼š
```
POST /api/v1.0.1/content/promote/start-promote        # å‘èµ·æ¨çƒ­
GET  /api/v1.0.1/content/promote/list                 # æˆ‘çš„æ¨çƒ­åˆ—è¡¨
GET  /api/v1.0.1/content/promote/stat/{promoteid}    # æ¨çƒ­æ•°æ®ç»Ÿè®¡
GET  /api/v1.0.1/content/promote/config               # æ¨çƒ­é…ç½®ï¼ˆè´¹ç”¨/æ—¶é•¿ï¼‰
```

**å¼€å‘è®¡åˆ’**ï¼š2äººå¤©
- Day1: æ¨çƒ­è¡¨è®¾è®¡ã€æ¨çƒ­å‘èµ·æ¥å£ã€æƒé‡è®¡ç®—
- Day2: æ¨çƒ­ç»Ÿè®¡ã€æ•°æ®çœ‹æ¿ã€æ‰“èµè‡ªåŠ¨æ¨çƒ­é€»è¾‘é›†æˆ

#### æœç´¢ç»“æœåˆ†ç±»Tabï¼ˆ0%ï¼‰- P1ä¼˜å…ˆçº§ âœ… æ–°å¢
**éœ€æ±‚**ï¼šæœç´¢ç»“æœæŒ‰ç±»å‹åˆ†Tabæ˜¾ç¤ºï¼Œæ–¹ä¾¿ç”¨æˆ·å¿«é€Ÿç­›é€‰
- **æœç´¢Tabåˆ†ç±»**ï¼šå…¨éƒ¨ã€æ¨èå†…å®¹ã€ç”¨æˆ·ã€è¯é¢˜ã€å¹¿å‘Š
- **æ¨èå†…å®¹Tab**ï¼šæŒ‰ç›¸å…³åº¦/çƒ­åº¦/æ—¶é—´æ’åº
- **ç”¨æˆ·Tab**ï¼šæŒ‰ç²‰ä¸æ•°/å…³æ³¨æ•°æ’åº
- **è¯é¢˜Tab**ï¼šæŒ‰å‚ä¸åº¦/çƒ­åº¦æ’åº
- **å¹¿å‘ŠTab**ï¼šä»…å±•ç¤º2çº§ç®¡ç†å‘˜å‘å¸ƒçš„å¹¿å‘Šï¼ˆå¦‚å¼€å¯ï¼‰

**å®ç°æ–¹å¼**ï¼š
- å‰ç«¯æœç´¢æ—¶å‘é€typeå‚æ•°ï¼ˆall/content/user/topic/adï¼‰
- åç«¯æ ¹æ®typeè°ƒç”¨ä¸åŒçš„æœç´¢æœåŠ¡ï¼ˆContentSearchService / UserSearchService / TopicSearchServiceï¼‰
- ç»Ÿä¸€è¿”å›æ ¼å¼ï¼Œå‰ç«¯è¿›è¡ŒTabå±•ç¤º

**æœç´¢é¡µæ”¹é€ **ï¼š
- æœç´¢æ¡†ä¸Šæ–¹æ˜¾ç¤ºTabåˆ‡æ¢ï¼ˆå…¨éƒ¨|å†…å®¹|ç”¨æˆ·|è¯é¢˜|å¹¿å‘Šï¼‰
- å„Tabä¸‹å±•ç¤ºå¯¹åº”ç»“æœ
- æ”¯æŒåœ¨æ¯ä¸ªTabå†…ç»§ç»­ç»†ç­›ï¼ˆå¦‚æ’åºã€æ—¶é—´èŒƒå›´ç­‰ï¼‰

**APIæ¥å£æ”¹é€ **ï¼š
```
GET /api/v1.0.1/search/all?q=xxx&type=all              # ç»¼åˆæœç´¢ï¼ˆå…¨éƒ¨ï¼‰
GET /api/v1.0.1/search/content?q=xxx&type=content      # å†…å®¹æœç´¢
GET /api/v1.0.1/search/user?q=xxx&type=user            # ç”¨æˆ·æœç´¢
GET /api/v1.0.1/search/topic?q=xxx&type=topic          # è¯é¢˜æœç´¢
GET /api/v1.0.1/search/ad?q=xxx&type=ad                # å¹¿å‘Šæœç´¢
```

**å¼€å‘è®¡åˆ’**ï¼š1.5äººå¤©
- åç«¯ï¼šæ”¹é€ æœç´¢æ¥å£æ”¯æŒtypeå‚æ•°ï¼ˆ0.5äººå¤©ï¼‰
- å‰ç«¯ï¼šUIæ”¹é€ æ”¯æŒTabåˆ‡æ¢ï¼ˆ1äººå¤©ï¼‰

#### å›¾æ–‡å®å†µæ¨¡å¼ï¼ˆ0%ï¼‰- P2ä¼˜å…ˆçº§ âœ… æ–°å¢
**éœ€æ±‚**ï¼šå‚è€ƒå¾—ç‰©APPçš„å›¾æ–‡å®å†µæ¨¡å¼ï¼Œæ”¯æŒå®æ—¶æ›´æ–°å’Œå¤šé•œå¤´å±•ç¤º
- **æ¨¡å¼è¯´æ˜**ï¼šåˆ›ä½œè€…å¯å‘å¸ƒä¸€ä¸ª"å®å†µ"é¡¹ç›®ï¼ŒåŒ…å«å¤šå¼ å›¾ç‰‡/è§†é¢‘çš„åºåˆ—
- **å®æ—¶æ›´æ–°**ï¼šå…è®¸åˆ›ä½œè€…åœ¨å®å†µè¿›è¡Œä¸­æŒç»­ä¸Šä¼ æ–°å›¾ç‰‡ï¼ˆç±»ä¼¼"ç©¿æ­ç›´æ’­"ï¼‰
- **å¤šé•œå¤´å±•ç¤º**ï¼šç”¨æˆ·å¯æŸ¥çœ‹"å‰æ™¯ã€ä¾§æ™¯ã€åæ™¯"ç­‰å¤šä¸ªè§’åº¦çš„å†…å®¹
- **æ—¶é—´çº¿**ï¼šæ˜¾ç¤ºå®å†µçš„å‘å¸ƒæ—¶é—´çº¿ï¼ˆ13:45 å‰æ™¯ã€14:00 ä¾§æ™¯ã€14:15 åæ™¯ï¼‰
- **äº’åŠ¨**ï¼šç”¨æˆ·å¯åœ¨æ—¶é—´çº¿ä¸Šçš„å„ä¸ªèŠ‚ç‚¹è¿›è¡Œè¯„è®ºã€ç‚¹èµ

**è¡¨è®¾è®¡**ï¼š
- `content_showcase` è¡¨ï¼ˆå®å†µé¡¹ç›®è¡¨ï¼‰
  - showcase_idã€user_idã€titleã€statusï¼ˆ0è‰ç¨¿/1è¿›è¡Œä¸­/2å·²å®Œæˆï¼‰ã€create_timeã€update_time
- `content_showcase_frame` è¡¨ï¼ˆå®å†µé•œå¤´è¡¨ï¼‰
  - frame_idã€showcase_idã€frame_indexã€frame_typeï¼ˆ1å‰æ™¯/2ä¾§æ™¯/3åæ™¯/4å…¶ä»–ï¼‰
  - media_urlã€media_typeã€timestampï¼ˆä¸Šä¼ æ—¶é—´ï¼‰

**APIæ¥å£**ï¼š
```
POST   /api/v1.0.1/content/showcase/create            # åˆ›å»ºå®å†µé¡¹ç›®
POST   /api/v1.0.1/content/showcase/add-frame         # æ·»åŠ é•œå¤´
GET    /api/v1.0.1/content/showcase/detail            # æŸ¥çœ‹å®å†µè¯¦æƒ…
PUT    /api/v1.0.1/content/showcase/finish            # å®Œæˆå®å†µ
GET    /api/v1.0.1/content/showcase/timeline          # è·å–æ—¶é—´çº¿
POST   /api/v1.0.1/content/showcase/frame-comment     # è¯„è®ºé•œå¤´
```

**å‰ç«¯å±•ç¤º**ï¼š
- å®å†µè¯¦æƒ…é¡µæ˜¾ç¤ºæ—¶é—´çº¿ï¼ˆç«–å‘æ’åˆ—ï¼‰
- æ¯ä¸ªé•œå¤´æ˜¾ç¤ºç¼©ç•¥å›¾å’Œæ ‡ç­¾ï¼ˆå‰æ™¯/ä¾§æ™¯ç­‰ï¼‰
- ç‚¹å‡»é•œå¤´å±•å¼€æŸ¥çœ‹å¤§å›¾å’Œè¯„è®º

**å¼€å‘è®¡åˆ’**ï¼š2äººå¤©
- Day1: å®å†µè¡¨è®¾è®¡ã€åˆ›å»º/ç¼–è¾‘æ¥å£ã€æ—¶é—´çº¿æ•°æ®ç»„ç»‡
- Day2: å‰ç«¯å±•ç¤ºå’Œäº¤äº’

#### å†…å®¹åˆ†ç±»ç®—æ³•ï¼ˆ0%ï¼‰- P1ä¼˜å…ˆçº§
**éœ€æ±‚**ï¼šä½¿ç”¨pytorchè®­ç»ƒåˆ†ç±»æ¨¡å‹ï¼Œè‡ªåŠ¨åˆ†ç±»å†…å®¹
- åˆ†ç±»ç±»å‹ï¼šæŠ½è±¡ã€ä½“è‚²ã€å…«å¦ã€äºŒæ¬¡å…ƒã€ä¹¡æ‘ã€ç§‘æ™®ç­‰
- è®­ç»ƒæ•°æ®é›†å‡†å¤‡
- æ¨¡å‹è®­ç»ƒä¸è°ƒä¼˜
- æ¨¡å‹éƒ¨ç½²ä¸æ¨ç†
- åˆ†ç±»ç»“æœå­˜å‚¨

**å¼€å‘è®¡åˆ’**ï¼š4äººå¤©
- Day1: å‡†å¤‡è®­ç»ƒæ•°æ®é›†ï¼Œæ ‡æ³¨åˆ†ç±»
- Day2: è®­ç»ƒpytorchåˆ†ç±»æ¨¡å‹
- Day3: éƒ¨ç½²æ¨¡å‹ï¼Œç¼–å†™æ¨ç†æ¥å£
- Day4: é›†æˆåˆ°å‘å¸ƒæµç¨‹ï¼Œæµ‹è¯•åˆ†ç±»å‡†ç¡®åº¦

#### å¹¿å‘Šç³»ç»Ÿï¼ˆ0%ï¼‰- P1ä¼˜å…ˆçº§
**éœ€æ±‚**ï¼š2çº§ç®¡ç†å‘˜å‘å¸ƒå¹¿å‘Šï¼Œæµè§ˆé‡è®¡è´¹
- å¹¿å‘Šå†…å®¹æ ‡è¯†ï¼ˆis_adå­—æ®µï¼‰
- å¹¿å‘Šæ”¶ç›Šè®¡ç®—ï¼ˆæ¯10æ¬¡æµè§ˆ1ä¸ªå¸ï¼‰
- å¹¿å‘Šä½é…ç½®ï¼ˆé¦–é¡µä¿¡æ¯æµï¼‰
- å¹¿å‘Šæ•°æ®ç»Ÿè®¡

**è¡¨è®¾è®¡**ï¼š
- `content_ad_config`ï¼ˆå¹¿å‘Šé…ç½®è¡¨ï¼‰
  - å¹¿å‘ŠIDã€å‘å¸ƒè€…IDã€å¹¿å‘Šç±»å‹ã€æ”¶ç›Šè§„åˆ™
- `content_ad_stat`ï¼ˆå¹¿å‘Šç»Ÿè®¡è¡¨ï¼‰
  - å¹¿å‘ŠIDã€æµè§ˆé‡ã€ç‚¹å‡»é‡ã€æ”¶ç›Šé‡‘é¢

**å¼€å‘è®¡åˆ’**ï¼š5äººå¤©
- Day1: è®¾è®¡å¹¿å‘Šè¡¨ç»“æ„
- Day2: å¼€å‘å¹¿å‘Šå‘å¸ƒæ¥å£ã€2çº§ç®¡ç†å‘˜æƒé™æ ¡éªŒ
- Day3: å¼€å‘å¹¿å‘Šæµè§ˆç»Ÿè®¡ã€æ”¶ç›Šè®¡ç®—
- Day4: å¼€å‘å¹¿å‘Šæ•°æ®æŠ¥è¡¨
- Day5: æµ‹è¯•å¹¿å‘Šè®¡è´¹é€»è¾‘

#### åˆ†äº«åŠŸèƒ½å®Œå–„ï¼ˆ20%ï¼‰- P2ä¼˜å…ˆçº§
**éœ€æ±‚**ï¼šåˆ†äº«ä½œå“ç»™å¥½å‹ï¼Œä»¥å¡ç‰‡å½¢å¼å±•ç¤º
- åˆ†äº«å¡ç‰‡ç”Ÿæˆï¼ˆåŒ…å«å°é¢ã€æ ‡é¢˜ã€ä½œè€…ï¼‰
- åˆ†äº«é“¾æ¥ç”Ÿæˆ
- åˆ†äº«ç»Ÿè®¡ï¼ˆåˆ†äº«æ¬¡æ•°ï¼‰
- åˆ†äº«å›è°ƒï¼ˆè®°å½•åˆ†äº«æ¥æºï¼‰

**å¼€å‘è®¡åˆ’**ï¼š2äººå¤©
- Day1: å¼€å‘åˆ†äº«å¡ç‰‡ç”Ÿæˆæ¥å£
- Day2: å¼€å‘åˆ†äº«ç»Ÿè®¡å’Œå›è°ƒ

#### ä¸¾æŠ¥åŠŸèƒ½ï¼ˆ0%ï¼‰- P1ä¼˜å…ˆçº§
**éœ€æ±‚**ï¼šç”¨æˆ·ä¸¾æŠ¥è¿è§„ä½œå“
- ä¸¾æŠ¥ç±»å‹ï¼ˆæ¶‰é»„ã€æš´åŠ›ã€æ”¿æ²»ã€å¹¿å‘Šã€å…¶ä»–ï¼‰
- ä¸¾æŠ¥è®°å½•
- ä¸¾æŠ¥å®¡æ ¸
- ä¸¾æŠ¥å¤„ç†ï¼ˆä¸‹æ¶/å°å·ï¼‰

**å¼€å‘è®¡åˆ’**ï¼š3äººå¤©

#### @åŠŸèƒ½å®Œå–„ï¼ˆ50%ï¼‰- P2ä¼˜å…ˆçº§
**éœ€æ±‚**ï¼šå‘å¸ƒå†…å®¹æ—¶@å…¶ä»–ç”¨æˆ·
- å·²å®ç°åŸºç¡€@åŠŸèƒ½
- **å¾…å®Œå–„**ï¼š@é€šçŸ¥æ¨é€ã€@åˆ—è¡¨å±•ç¤º

**å¼€å‘è®¡åˆ’**ï¼š1äººå¤©

## ğŸ”§ æ ¸å¿ƒä»£ç ä½ç½®

### Controllerï¼ˆæ¥å£å±‚ï¼‰
- `AppContentPostController.java` - å†…å®¹å‘å¸ƒæ¥å£ - `/api/v1.0.1/content/post/*`
- `AppContentRecommendController.java` - æ¨èæ¥å£ - `/api/v1.0.1/content/recommend/*`
- `AppSearchController.java` - æœç´¢æ¥å£ - `/api/v1.0.1/search/*`
- `AppContentCommentController.java` - è¯„è®ºæ¥å£ - `/api/v1.0.1/content/comment/*`
- `AppContentInteractionController.java` - äº’åŠ¨æ¥å£ - `/api/v1.0.1/content/like/*` `/api/v1.0.1/content/favorite/*`

### Serviceï¼ˆä¸šåŠ¡å±‚ï¼‰
- `ContentPostService.java` - å†…å®¹å‘å¸ƒæœåŠ¡
- `ContentAuditService.java` - å†…å®¹å®¡æ ¸æœåŠ¡
- `ContentRecommendService.java` - æ¨èç®—æ³•æœåŠ¡ï¼ˆ700+è¡Œï¼‰
- `ContentSearchService.java` - å†…å®¹æœç´¢æœåŠ¡ï¼ˆ700+è¡Œï¼ŒESï¼‰
- `UserSearchService.java` - ç”¨æˆ·æœç´¢æœåŠ¡ï¼ˆ500+è¡Œï¼ŒESï¼‰
- `ContentCommentService.java` - è¯„è®ºæœåŠ¡
- `ContentLikeService.java` - ç‚¹èµæœåŠ¡
- `ContentFavoriteService.java` - æ”¶è—æœåŠ¡

### DataObjectï¼ˆæ•°æ®å¯¹è±¡ï¼‰
- `ContentPostDO.java` - å†…å®¹å®ä½“ï¼ˆå«15ä¸ªè§†é¢‘æ‰©å±•å­—æ®µï¼‰
  - é€šç”¨å­—æ®µï¼štitle, content, cover_url, typeï¼ˆ1å›¾æ–‡/2è§†é¢‘ï¼‰
  - è§†é¢‘æ‰©å±•å­—æ®µ15ä¸ªï¼švideo_url, video_duration, video_width, video_height, video_size, video_formatç­‰
- `ContentCommentDO.java` - è¯„è®ºå®ä½“
  - comment_content, media_urlsï¼ˆå›¾ç‰‡/è§†é¢‘/GIFï¼‰
- `ContentTopicDO.java` - è¯é¢˜å®ä½“

## âš¡ æ€§èƒ½ä¼˜åŒ–è®°å½•

### æ•°æ®åº“åˆ†åŒºä¼˜åŒ–
- **content_post**: æœˆåˆ†åŒºï¼ˆRANGE by created_atï¼‰- è‡ªåŠ¨åˆ†åŒºè£å‰ªï¼Œå†å²æ•°æ®æ˜“å½’æ¡£
- **content_comment**: æ—¥åˆ†åŒºï¼ˆRANGE by created_atï¼‰- é«˜é¢‘å†™å…¥åœºæ™¯ä¼˜åŒ–
- **content_like**: HASHåˆ†åŒºï¼ˆ16åˆ†åŒº by user_idï¼‰- å¹¶å‘å†™å…¥æ€§èƒ½æå‡

### ç‰©åŒ–è§†å›¾
- **mv_content_hot_rank**: çƒ­æ¦œå†…å®¹é¢„è®¡ç®—ï¼ˆ50å€æ€§èƒ½æå‡ï¼‰
  - çƒ­åº¦å…¬å¼ï¼š`like*2 + comment*3 + share*5 + collect*4 - time_decay`
  - è¦†ç›–æœ€è¿‘7å¤©ï¼ŒTOP 1000
  - æ¯å°æ—¶åˆ·æ–°ï¼ˆXXL-Jobè°ƒåº¦ï¼‰

### ç¼“å­˜ç­–ç•¥
- Redisç¼“å­˜çƒ­é—¨å†…å®¹ï¼ˆZSetå­˜å‚¨ï¼Œ1å°æ—¶TTLï¼‰
- Redisç¼“å­˜æ¨èFeedæµï¼ˆ5åˆ†é’ŸTTLï¼‰
- Elasticsearchå…¨æ–‡æœç´¢ï¼ˆIKåˆ†è¯å™¨ï¼‰

### å®šæ—¶ä»»åŠ¡ï¼ˆXXL-Jobï¼‰
- **ContentPartitionMaintenanceJob**: åˆ†åŒºç»´æŠ¤ï¼ˆæ¯æœˆ1å·å‡Œæ™¨2ç‚¹ï¼‰
  - è‡ªåŠ¨åˆ›å»º content_post æœªæ¥6ä¸ªæœˆåˆ†åŒº
  - è‡ªåŠ¨åˆ›å»º content_comment æœªæ¥30å¤©åˆ†åŒº
- **ContentHotRankRefreshJob**: çƒ­æ¦œåˆ·æ–°ï¼ˆæ¯å°æ—¶ç¬¬5åˆ†é’Ÿï¼‰
  - åˆ·æ–° mv_content_hot_rank ç‰©åŒ–è§†å›¾
  - ä½¿ç”¨ CONCURRENTLY æ¨¡å¼ï¼Œä¸é˜»å¡æŸ¥è¯¢

**é…ç½®è¯´æ˜**: è¯¦è§ `sql/migration/XXL_JOB_SETUP_GUIDE.md`

## âš ï¸ æ³¨æ„äº‹é¡¹

### å¼€å‘è§„èŒƒ
1. **æ‰€æœ‰å†…å®¹å‘å¸ƒå¿…é¡»ç»è¿‡å®¡æ ¸**
2. **è§†é¢‘å­—æ®µæ‰©å±•å¿…é¡»ä½¿ç”¨ContentPostDOçš„15ä¸ªæ‰©å±•å­—æ®µ**
3. **æ¨èç®—æ³•è¦è€ƒè™‘å†·å¯åŠ¨é—®é¢˜ï¼ˆæ–°ç”¨æˆ·/æ–°å†…å®¹ï¼‰**
4. **æœç´¢ç»“æœå¿…é¡»é«˜äº®æ˜¾ç¤ºå…³é”®è¯**
5. **è¯„è®ºå›¾ç‰‡/è§†é¢‘å¿…é¡»ç»è¿‡å®¡æ ¸**

### å¸¸è§å‘ç‚¹
1. æ¨èç®—æ³•è¦é¿å…ä¿¡æ¯èŒ§æˆ¿ï¼ˆåŠ å…¥10%éšæœºæ¢ç´¢ï¼‰
2. çƒ­åº¦åˆ†æ•°æ›´æ–°è¦è€ƒè™‘æ—¶é—´è¡°å‡
3. æœç´¢ç´¢å¼•åŒæ­¥è¦ä¿è¯å®æ—¶æ€§ï¼ˆCanal binlogç›‘å¬ï¼‰
4. è¯„è®ºåˆ é™¤è¦çº§è”åˆ é™¤å›å¤è¯„è®º
5. ç‚¹èµ/æ”¶è—è¦åšå¹‚ç­‰æ€§å¤„ç†

### å¾…è§£å†³é—®é¢˜
1. æ¨èç®—æ³•å¦‚ä½•è¿›ä¸€æ­¥ä¼˜åŒ–ï¼ˆå¼•å…¥æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼‰
2. Elasticsearchç´¢å¼•å¦‚ä½•å¤„ç†å¤§æ•°æ®é‡ï¼ˆåˆ†ç‰‡ç­–ç•¥ï¼‰
3. çƒ­åº¦åˆ†æ•°è®¡ç®—å…¬å¼å¦‚ä½•è°ƒä¼˜
4. å†…å®¹åˆ†ç±»ç®—æ³•çš„å‡†ç¡®åº¦å¦‚ä½•æå‡

## ğŸ“Š æ•°æ®åº“è¡¨è®¾è®¡

### ER å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Content æ¨¡å— ER å…³ç³»å›¾                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      topic (è¯é¢˜è¡¨)       â”‚            â”‚  content_post (å†…å®¹è¡¨)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK  id                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ FK  publish_topic_id     â”‚
â”‚     name                 â”‚   1:N      â”‚ PK  id                   â”‚
â”‚     description          â”‚            â”‚ FK  user_id (ä½œè€…)        â”‚
â”‚     icon                 â”‚            â”‚ FK  auditor_id (å®¡æ ¸å‘˜)   â”‚
â”‚     cover                â”‚            â”‚     title                â”‚
â”‚     type                 â”‚            â”‚     content              â”‚
â”‚     status               â”‚            â”‚     cover_image          â”‚
â”‚     participant_count    â”‚            â”‚  â”€â”€ å¤šåª’ä½“å­—æ®µ â”€â”€          â”‚
â”‚     content_count        â”‚            â”‚     images (JSON)        â”‚
â”‚     today_content_count  â”‚            â”‚     video_url            â”‚
â”‚     hot_score            â”‚            â”‚     video_cover          â”‚
â”‚     tags (JSON)          â”‚            â”‚     video_duration       â”‚
â”‚     creator_id           â”‚            â”‚     video_width/height   â”‚
â”‚     last_active_time     â”‚            â”‚     video_file_size      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚     video_format/quality â”‚
                                        â”‚  â”€â”€ ç»Ÿè®¡å­—æ®µ â”€â”€           â”‚
       ç”¨æˆ·ç³»ç»Ÿ (member)                 â”‚     view_count           â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚     like_count           â”‚
       â”‚  system_users â”‚                â”‚     comment_count        â”‚
       â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                â”‚     share_count          â”‚
       â”‚  id           â”‚                â”‚     collect_count        â”‚
       â”‚  username     â”‚                â”‚     forward_count        â”‚
       â”‚  ...          â”‚                â”‚     hot_score            â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚     recommend_score      â”‚
              â”‚                         â”‚  â”€â”€ å®¡æ ¸å­—æ®µ â”€â”€           â”‚
              â”‚                         â”‚     audit_status         â”‚
              â”‚ 1:N (ä½œè€…)               â”‚     audit_remark         â”‚
              â”‚                         â”‚  â”€â”€ é…ç½®å­—æ®µ â”€â”€           â”‚
              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚     is_public            â”‚
              â”‚                         â”‚     allow_comment        â”‚
              â”‚                         â”‚     allow_download       â”‚
              â”‚                         â”‚     is_top/is_hot        â”‚
              â”‚                         â”‚     status               â”‚
              â”‚                         â”‚     publish_time         â”‚
              â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                                    â”‚
              â”‚                                    â”‚ 1:N
              â”‚                                    â–¼
              â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                         â”‚ content_comment (è¯„è®ºè¡¨)  â”‚
              â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
              â”‚                         â”‚ PK  id                   â”‚
              â”‚                         â”‚ FK  content_id           â”‚
              â”‚                         â”‚ FK  user_id              â”‚
              â”‚                         â”‚ FK  parent_id (çˆ¶è¯„è®º)    â”‚
              â”‚                         â”‚ FK  root_id (æ ¹è¯„è®º)      â”‚
              â”‚                         â”‚ FK  reply_user_id        â”‚
              â”‚                         â”‚     content              â”‚
              â”‚                         â”‚     images (JSON)        â”‚
              â”‚                         â”‚     is_anonymous         â”‚
              â”‚                         â”‚     like_count           â”‚
              â”‚                         â”‚     reply_count          â”‚
              â”‚                         â”‚     report_count         â”‚
              â”‚                         â”‚     audit_status         â”‚
              â”‚                         â”‚     status               â”‚
              â”‚                         â”‚     ip_address           â”‚
              â”‚                         â”‚     user_agent           â”‚
              â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                                    â”‚
              â”‚                                    â”‚ è‡ªå…³è”
              â”‚                                    â””â”€â”€â”€â”€â”€â”
              â”‚                                          â”‚
              â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚         â”‚
              â”‚         â–¼
              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  â”‚  è¯„è®ºæ ‘å½¢ç»“æ„ç¤ºä¾‹:                         â”‚
              â”‚  â”‚  root_id=1, parent_id=null  (ä¸€çº§è¯„è®º)    â”‚
              â”‚  â”‚    â”œâ”€ root_id=1, parent_id=1 (äºŒçº§å›å¤)   â”‚
              â”‚  â”‚    â””â”€ root_id=1, parent_id=1 (äºŒçº§å›å¤)   â”‚
              â”‚  â”‚       â””â”€ root_id=1, parent_id=3 (ä¸‰çº§)    â”‚
              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚
              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  â”‚     content_interaction (äº’åŠ¨è®°å½•è¡¨)              â”‚
              â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
              â”‚  â”‚ PK  id                                           â”‚
              â”œâ”€â–ºâ”‚ FK  user_id                                      â”‚
              â”‚  â”‚ FK  content_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º content_post.id      â”‚
              â”‚  â”‚     interaction_type (1æµè§ˆ/2ç‚¹èµ/3æ”¶è—/4åˆ†äº«)    â”‚
              â”‚  â”‚     device_info                                  â”‚
              â”‚  â”‚     ip_address                                   â”‚
              â”‚  â”‚     user_agent                                   â”‚
              â”‚  â”‚     source (æ¥æºæ¸ é“)                             â”‚
              â”‚  â”‚     extra_data (æ‰©å±•æ•°æ®)                         â”‚
              â”‚  â”‚     create_time                                  â”‚
              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚
              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  â”‚     content_like (ç‚¹èµè¡¨)                         â”‚
              â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
              â”‚  â”‚ PK  id                                           â”‚
              â”œâ”€â–ºâ”‚ FK  user_id                                      â”‚
              â”‚  â”‚ FK  post_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º content_post.id      â”‚
              â”‚  â”‚     create_time                                  â”‚
              â”‚  â”‚ UK  uk_post_user (post_id + user_id)  -- é˜²é‡å¤  â”‚
              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚
              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  â”‚     content_favorite (æ”¶è—è¡¨)                     â”‚
              â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
              â”‚  â”‚ PK  id                                           â”‚
              â”œâ”€â–ºâ”‚ FK  user_id                                      â”‚
              â”‚  â”‚ FK  post_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º content_post.id      â”‚
              â”‚  â”‚ FK  group_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º favorite_group.id    â”‚
              â”‚  â”‚     create_time                                  â”‚
              â”‚  â”‚ UK  uk_post_user (post_id + user_id)  -- é˜²é‡å¤  â”‚
              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚
              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  â”‚     content_favorite_group (æ”¶è—åˆ†ç»„è¡¨)           â”‚
              â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
              â”‚  â”‚ PK  id                                           â”‚
              â””â”€â–ºâ”‚ FK  user_id                                      â”‚
                 â”‚     group_name                                   â”‚
                 â”‚     sort                                         â”‚
                 â”‚     create_time                                  â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚     user_behavior (ç”¨æˆ·è¡Œä¸ºè¡¨) - æ¨èç®—æ³•æ•°æ®æº    â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚ PK  id                                           â”‚
         â”‚ FK  user_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º system_users.id      â”‚
         â”‚ FK  post_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º content_post.id      â”‚
         â”‚     behavior_type (view/like/favorite/share)     â”‚
         â”‚     create_time                                  â”‚
         â”‚ IDX idx_user_id, idx_post_id, idx_behavior_type  â”‚
         â”‚ åˆ†åŒº: æŒ‰æœˆåˆ†åŒºï¼ˆä¿ç•™2å¹´ï¼‰                          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³ç³»è¯´æ˜

#### 1. **è¯é¢˜ â†” å†…å®¹ (1:N)**
```sql
topic.id â†â”€ content_post.publish_topic_id
```
- ä¸€ä¸ªè¯é¢˜å¯ä»¥æœ‰å¤šç¯‡å†…å®¹
- å†…å®¹å¯é€‰æ‹©å…³è”è¯é¢˜ï¼ˆå¯ä¸ºç©ºï¼‰
- è¯é¢˜ç»Ÿè®¡å­—æ®µè‡ªåŠ¨ç»´æŠ¤ï¼š`content_count`, `today_content_count`, `participant_count`

#### 2. **ç”¨æˆ· â†” å†…å®¹ (1:N)**
```sql
system_users.id â†â”€ content_post.user_id (ä½œè€…)
system_users.id â†â”€ content_post.auditor_id (å®¡æ ¸å‘˜)
```
- ä½œè€…åˆ›å»ºå†…å®¹ï¼ˆ`user_id`ï¼‰
- å®¡æ ¸å‘˜å®¡æ ¸å†…å®¹ï¼ˆ`auditor_id`ï¼‰

#### 3. **å†…å®¹ â†” è¯„è®º (1:N)**
```sql
content_post.id â†â”€ content_comment.content_id
```
- ä¸€ç¯‡å†…å®¹å¯ä»¥æœ‰å¤šæ¡è¯„è®º
- è¯„è®ºè®¡æ•°åŒæ­¥åˆ° `content_post.comment_count`

#### 4. **è¯„è®ºæ ‘å½¢ç»“æ„ (è‡ªå…³è”)**
```sql
content_comment.id â†â”€ content_comment.parent_id (ç›´æ¥çˆ¶çº§)
content_comment.id â†â”€ content_comment.root_id (æ ¹è¯„è®º)
```
- **root_id**: æŒ‡å‘é¡¶çº§è¯„è®ºï¼ˆä¸€çº§è¯„è®ºï¼‰
- **parent_id**: æŒ‡å‘ç›´æ¥å›å¤çš„è¯„è®º
- **reply_user_id**: è¢«å›å¤çš„ç”¨æˆ·ID

**ç¤ºä¾‹**ï¼š
```
è¯„è®º A (id=1, root_id=null, parent_id=null)
 â”œâ”€ å›å¤ B (id=2, root_id=1, parent_id=1)
 â””â”€ å›å¤ C (id=3, root_id=1, parent_id=1)
     â””â”€ å›å¤ D (id=4, root_id=1, parent_id=3)
```

#### 5. **å†…å®¹ â†” äº’åŠ¨è®°å½• (1:N)**
```sql
content_post.id â†â”€ content_interaction.content_id
system_users.id â†â”€ content_interaction.user_id
```
- è®°å½•æ‰€æœ‰ç”¨æˆ·å¯¹å†…å®¹çš„æ“ä½œ
- **interaction_type**:
  - `1` - æµè§ˆ
  - `2` - ç‚¹èµ
  - `3` - æ”¶è—
  - `4` - åˆ†äº«

#### 6. **å†…å®¹ â†” ç‚¹èµ (1:N)**
```sql
content_post.id â†â”€ content_like.post_id
system_users.id â†â”€ content_like.user_id
```
- å”¯ä¸€ç´¢å¼• `uk_post_user` é˜²æ­¢é‡å¤ç‚¹èµ
- ç‚¹èµè®¡æ•°åŒæ­¥åˆ° `content_post.like_count`

#### 7. **å†…å®¹ â†” æ”¶è— (1:N)**
```sql
content_post.id â†â”€ content_favorite.post_id
system_users.id â†â”€ content_favorite.user_id
content_favorite_group.id â†â”€ content_favorite.group_id
```
- å”¯ä¸€ç´¢å¼• `uk_post_user` é˜²æ­¢é‡å¤æ”¶è—
- æ”¯æŒæ”¶è—åˆ†ç»„ç®¡ç†
- æ”¶è—è®¡æ•°åŒæ­¥åˆ° `content_post.collect_count`

#### 8. **ç”¨æˆ· â†” è¡Œä¸ºè®°å½• (1:N)**
```sql
system_users.id â†â”€ user_behavior.user_id
content_post.id â†â”€ user_behavior.post_id
```
- è¿½è¸ªç”¨æˆ·è¡Œä¸ºè½¨è¿¹ï¼ˆæµè§ˆ/ç‚¹èµ/æ”¶è—/åˆ†äº«ï¼‰
- æ¨èç®—æ³•æ•°æ®æº
- æŒ‰æœˆåˆ†åŒºï¼Œä¿ç•™2å¹´æ•°æ®

### æ ¸å¿ƒè¡¨
   - ä¸»é”®ï¼šid
   - å­—æ®µï¼šuser_id, typeï¼ˆ1å›¾æ–‡/2è§†é¢‘ï¼‰, title, content, cover_url, topic_ids, location, audit_status
   - è§†é¢‘æ‰©å±•å­—æ®µ15ä¸ªï¼švideo_url, video_durationç­‰
   - ç´¢å¼•ï¼šidx_user_id, idx_type, idx_audit_status, idx_create_time
   - åˆ†åŒºï¼šæŒ‰æœˆåˆ†åŒºï¼ˆä¿ç•™10å¹´ï¼‰

2. **content_comment**ï¼ˆè¯„è®ºè¡¨ï¼‰
   - ä¸»é”®ï¼šid
   - å­—æ®µï¼špost_id, user_id, parent_id, content, media_urlsï¼ˆJSONæ•°ç»„ï¼‰, create_time
   - ç´¢å¼•ï¼šidx_post_id, idx_user_id, idx_parent_id
   - åˆ†åŒºï¼šæŒ‰æœˆåˆ†åŒºï¼ˆä¿ç•™5å¹´ï¼‰

3. **content_like**ï¼ˆç‚¹èµè¡¨ï¼‰
   - ä¸»é”®ï¼šid
   - å­—æ®µï¼špost_id, user_id, create_time
   - å”¯ä¸€ç´¢å¼•ï¼šuk_post_userï¼ˆpost_id + user_idï¼‰
   - ç´¢å¼•ï¼šidx_user_id

4. **content_favorite**ï¼ˆæ”¶è—è¡¨ï¼‰
   - ä¸»é”®ï¼šid
   - å­—æ®µï¼špost_id, user_id, group_id, create_time
   - å”¯ä¸€ç´¢å¼•ï¼šuk_post_userï¼ˆpost_id + user_idï¼‰
   - ç´¢å¼•ï¼šidx_user_id, idx_group_id

5. **content_topic**ï¼ˆè¯é¢˜è¡¨ï¼‰
   - ä¸»é”®ï¼šid
   - å­—æ®µï¼šname, icon, description, post_count, follow_count
   - å”¯ä¸€ç´¢å¼•ï¼šuk_name

6. **user_behavior**ï¼ˆç”¨æˆ·è¡Œä¸ºè¡¨ï¼‰
   - ä¸»é”®ï¼šid
   - å­—æ®µï¼šuser_id, post_id, behavior_typeï¼ˆview/like/favorite/shareï¼‰, create_time
   - ç´¢å¼•ï¼šidx_user_id, idx_post_id, idx_behavior_type
   - åˆ†åŒºï¼šæŒ‰æœˆåˆ†åŒºï¼ˆä¿ç•™2å¹´ï¼‰

### å¾…æ–°å»ºè¡¨
7. **content_ad_config**ï¼ˆå¹¿å‘Šé…ç½®è¡¨ï¼‰- å¾…å¼€å‘
8. **PostgreSQL pagination must use LIMIT {limit} OFFSET {offset}; do not use LIMIT offset, limit**
9. **The deleted column is int2(0/1); SQL must use deleted = 0/1, not boolean**
10. **RPC API implementations must use @RestController (not only @Service) to expose endpoints**

## ğŸ“ Elasticsearchç´¢å¼•è®¾è®¡

### xiaolvshu_contentï¼ˆå†…å®¹ç´¢å¼•ï¼‰
```json
{
  "mappings": {
    "properties": {
      "post_id": {"type": "long"},
      "user_id": {"type": "long"},
      "type": {"type": "integer"},
      "title": {"type": "text", "analyzer": "ik_max_word", "search_analyzer": "ik_smart"},
      "content": {"type": "text", "analyzer": "ik_max_word", "search_analyzer": "ik_smart"},
      "tags": {"type": "keyword"},
      "create_time": {"type": "date"},
      "like_count": {"type": "integer"},
      "comment_count": {"type": "integer"},
      "hot_score": {"type": "float"}
    }
  },
  "settings": {
    "number_of_shards": 3,
    "number_of_replicas": 1
  }
}
```

### xiaolvshu_userï¼ˆç”¨æˆ·ç´¢å¼•ï¼‰
```json
{
  "mappings": {
    "properties": {
      "user_id": {"type": "long"},
      "custom_id": {"type": "keyword"},
      "nickname": {"type": "text", "analyzer": "ik_max_word", "search_analyzer": "ik_smart"},
      "avatar": {"type": "keyword"},
      "intro": {"type": "text", "analyzer": "ik_max_word", "search_analyzer": "ik_smart"},
      "followers_count": {"type": "integer"},
      "posts_count": {"type": "integer"}
    }
  }
}
```

## ğŸ”’ MinIO æ–‡ä»¶å­˜å‚¨æœºåˆ¶

### é…ç½®ä½ç½®
- **é…ç½®æ¨¡å—**ï¼š`yudao-module-infra`ï¼ˆåŸºç¡€è®¾æ–½æ¨¡å—ï¼‰
- **é…ç½®æ–‡ä»¶**ï¼š`infra/src/main/resources/application-minio.yaml`
- **æ ¸å¿ƒå®ç°**ï¼š`S3FileClient.java`ï¼ˆä½¿ç”¨ AWS SDK S3 åè®®ï¼‰

### è§†é¢‘ä¸Šä¼ é™åˆ¶
**å½“å‰é…ç½®**ï¼š
- Spring Boot é™åˆ¶ï¼š16MBï¼ˆ`application.yaml: max-file-size`ï¼‰
- ä¸šåŠ¡ä»£ç é™åˆ¶ï¼š600MBï¼ˆ`AppContentMediaController.MAX_VIDEO_SIZE`ï¼‰

**é—®é¢˜**ï¼šé…ç½®å†²çªï¼Spring çš„ 16MB ä¼šå…ˆç”Ÿæ•ˆï¼Œå¯¼è‡´ 600MB é™åˆ¶å¤±æ•ˆ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```yaml
# éœ€è¦ä¿®æ”¹ yudao-module-infra/application.yaml
spring:
  servlet:
    multipart:
      max-file-size: 600MB      # æ”¹ä¸ºè‡³å°‘ 600MB
      max-request-size: 600MB
```

### è§†é¢‘æµç•…æ’­æ”¾æœºåˆ¶
**å½“å‰æ–¹æ¡ˆ**ï¼šâœ… **å·²ä½¿ç”¨æœ€ä½³å®è·µ**
- ä¸Šä¼ åè¿”å›é¢„ç­¾å URL
- å‰ç«¯ä½¿ç”¨ `<video src="{url}">` æ ‡ç­¾
- MinIO åŸç”Ÿæ”¯æŒ HTTP Range è¯·æ±‚
- å®ç°æµå¼æ’­æ”¾ã€æ‹–åŠ¨ã€æ–­ç‚¹ç»­ä¼ 

**æ— éœ€é¢å¤–é…ç½®**ï¼ŒMinIO è‡ªåŠ¨æ”¯æŒï¼

### è®¿é—®æ§åˆ¶
```yaml
# å¼€å‘ç¯å¢ƒ
enablePublicAccess: true   # å…¬å¼€è®¿é—®ï¼šhttp://localhost:9001/xiaolvshu-dev/video.mp4

# ç”Ÿäº§ç¯å¢ƒï¼ˆå»ºè®®ï¼‰
enablePublicAccess: false  # ç§æœ‰è®¿é—®ï¼šä½¿ç”¨é¢„ç­¾å URLï¼ˆ24å°æ—¶æœ‰æ•ˆï¼‰
```

## ğŸ—ï¸ æ•°æ®åº“æ¶æ„è®¾è®¡

### èŠ‹é“æ¡†æ¶çš„æ•°æ®åº“æ¶æ„ï¼ˆåŸºäºå®é™…åˆ†æï¼‰

**è®¾è®¡ç†å¿µ**ï¼šæ ¸å¿ƒåº“å…±äº« + é«˜é¢‘ä¸šåŠ¡åº“ç‹¬ç«‹

#### âœ… å®é™…é‡‡ç”¨çš„ 3 åº“æ¶æ„

```
1. ruoyi-vue-pro (èŠ‹é“æ ¸å¿ƒåº“ - å…±äº«)
   â”œâ”€â”€ system_*        # ç³»ç»Ÿç®¡ç†ï¼ˆç”¨æˆ·ã€è§’è‰²ã€æƒé™ã€èœå•ã€å­—å…¸ï¼‰
   â”œâ”€â”€ member_*        # ä¼šå‘˜åŸºç¡€ï¼ˆç”¨æˆ·ä¿¡æ¯ã€ç§¯åˆ†ã€ç­‰çº§ã€ç­¾åˆ°ï¼‰
   â”œâ”€â”€ infra_*         # åŸºç¡€è®¾æ–½ï¼ˆæ–‡ä»¶ã€é…ç½®ã€ä»»åŠ¡ã€ä»£ç ç”Ÿæˆï¼‰
   â”œâ”€â”€ pay_*           # æ”¯ä»˜åŠŸèƒ½ï¼ˆè®¢å•ã€æ¸ é“ã€é€€æ¬¾ï¼‰
   â”œâ”€â”€ bpm_*           # å·¥ä½œæµï¼ˆæµç¨‹ã€è¡¨å•ã€å®¡æ‰¹ï¼‰
   â”œâ”€â”€ mall_*          # å•†åŸï¼ˆå•†å“ã€è®¢å•ã€ä¿ƒé”€ï¼‰
   â””â”€â”€ å…¶ä»–èŠ‹é“é€šç”¨æ¨¡å—

2. xiaolvshu_content (å†…å®¹åº“ - ç‹¬ç«‹) â­ æœ¬æ¨¡å—
   â”œâ”€â”€ content_post (RANGEåˆ†åŒº, æŒ‰æœˆ)
   â”œâ”€â”€ content_media
   â”œâ”€â”€ content_topic
   â”œâ”€â”€ content_tag
   â”œâ”€â”€ content_comment (RANGEåˆ†åŒº, æŒ‰æ—¥)
   â”œâ”€â”€ content_like (HASHåˆ†åŒº, æŒ‰user_id)
   â”œâ”€â”€ content_favorite
   â””â”€â”€ content_interaction

3. xiaolvshu_message (æ¶ˆæ¯åº“ - ç‹¬ç«‹) â­ é«˜é¢‘é€šä¿¡
   â”œâ”€â”€ message_thread
   â”œâ”€â”€ message_detail (RANGEåˆ†åŒº, æŒ‰æœˆ)
   â”œâ”€â”€ message_participant
   â”œâ”€â”€ message_unread
   â””â”€â”€ im_* ç³»åˆ—è¡¨
```

#### ğŸ¯ ä¸ºä»€ä¹ˆåªæ‹† content å’Œ messageï¼Ÿ

**åŸåˆ™**ï¼šä¸è¿‡åº¦æ‹†åˆ†ï¼Œä¿æŒæ¶æ„ç®€å•

| æ¨¡å— | æ˜¯å¦ç‹¬ç«‹ | ç†ç”± |
|-----|---------|------|
| **content** | âœ… å¿…é¡»ç‹¬ç«‹ | æ•°æ®é‡å·¨å¤§ã€é«˜é¢‘è¯»å†™ã€éœ€æŒ‰æœˆåˆ†åŒºã€ä¸šåŠ¡æ ¸å¿ƒ |
| **message** | âœ… å¿…é¡»ç‹¬ç«‹ | æ¶ˆæ¯æš´å¢ã€é«˜å¹¶å‘å†™å…¥ã€å®æ—¶æ€§å¼ºã€éœ€ç‹¬ç«‹æ‰©å®¹ |
| **member** | âŒ å…±äº«æ ¸å¿ƒåº“ | æ•°æ®é‡å¯æ§ã€ä¸systemå¼ºå…³è”ï¼ˆæƒé™ï¼‰ã€è·¨åº“æˆæœ¬é«˜ |
| **mall** | âŒ å…±äº«æ ¸å¿ƒåº“ | èŠ‹é“å·²æœ‰æˆç†Ÿæ–¹æ¡ˆã€ä¸pay/memberå¼ºå…³è” |
| **å…¶ä»–** | âŒ å…±äº«æ ¸å¿ƒåº“ | æ•°æ®é‡å°ã€æŸ¥è¯¢é¢‘ç‡ä½ã€æ— ç‹¬ç«‹å¿…è¦ |

**Content åº“ç‹¬ç«‹çš„æ ¸å¿ƒåŸå› **ï¼š
- ğŸ“ˆ ç”¨æˆ·äº§ç”Ÿå†…å®¹æ˜¯æ ¸å¿ƒä¸šåŠ¡ï¼Œæ•°æ®å¢é•¿æå¿«
- ğŸ”¥ Feedæµã€ç‚¹èµã€è¯„è®ºã€æœç´¢æ˜¯é«˜é¢‘æ“ä½œ
- â° å¼ºæ—¶é—´åºåˆ—ç‰¹æ€§ï¼Œéœ€æŒ‰æœˆåˆ†åŒºä¼˜åŒ–æŸ¥è¯¢
- ğŸ“¦ å¯èƒ½è¾¾åˆ°äº¿çº§æ•°æ®ï¼Œéœ€ç‹¬ç«‹æ‰©å®¹ï¼ˆè¯»å†™åˆ†ç¦»ã€åˆ†ç‰‡ï¼‰
- ğŸ›¡ï¸ å†…å®¹å®¡æ ¸ã€æ‰¹é‡æ›´æ–°ä¸å½±å“æ ¸å¿ƒä¸šåŠ¡åº“ç¨³å®šæ€§

**Message åº“ç‹¬ç«‹çš„æ ¸å¿ƒåŸå› **ï¼š
- ğŸ’¬ IM æ¶ˆæ¯é‡éšç”¨æˆ·æ´»è·ƒåº¦æš´å¢
- ğŸš€ é«˜å¹¶å‘å†™å…¥ï¼ˆå®æ—¶èŠå¤©ï¼‰
- ğŸ”„ é¢‘ç¹æ›´æ–°ï¼ˆå·²è¯»çŠ¶æ€ã€æ’¤å›ã€åˆ é™¤ï¼‰
- â±ï¸ æ—¶æ•ˆæ€§å¼ºï¼ˆè¿‘æœŸæ¶ˆæ¯æŸ¥è¯¢ä¸ºä¸»ï¼Œå†å²å¯å½’æ¡£ï¼‰
- ğŸ“Š éœ€æŒ‰æœˆåˆ†åŒºï¼Œä¿ç•™åŠå¹´åˆ°1å¹´æ•°æ®å³å¯

#### ğŸ”´ å½“å‰å®é™…å®ç° vs ç›®æ ‡æ¶æ„

| å¯¹æ¯”é¡¹ | ç›®æ ‡æ¶æ„ | å½“å‰å®ç° | ä¸‹ä¸€æ­¥è¡ŒåŠ¨ |
|-------|---------|---------|-----------|
| **åˆ†åº“ç­–ç•¥** | 3åº“æ¶æ„ï¼ˆcore+content+messageï¼‰ | ä¸´æ—¶æ··åˆï¼ˆruoyi-vue-pro + xiaolvshuï¼‰ | âš ï¸ éœ€è¿ç§»åˆ°æ ‡å‡†3åº“ |
| **contentåº“** | `xiaolvshu_content` | âœ… ä½¿ç”¨ `xiaolvshu` | é‡å‘½ååº“æˆ–æ”¹é…ç½® |
| **messageåº“** | `xiaolvshu_message` | âœ… ä½¿ç”¨ `xiaolvshu` | é‡å‘½ååº“æˆ–æ”¹é…ç½® |
| **åˆ†åŒº** | PostgreSQLåŸç”Ÿåˆ†åŒº | âŒ æœªå¯ç”¨ | ç«‹å³å¯ç”¨ï¼ˆé›¶æˆæœ¬ï¼‰ |
| **ç‰©åŒ–è§†å›¾** | `mv_content_hot_rank` | âŒ æœªåˆ›å»º | å»ºè®®åˆ›å»º |
| **è‡ªåŠ¨åˆ†åŒºå‡½æ•°** | `create_monthly_partitions()` | âŒ æœªéƒ¨ç½² | å»ºè®®éƒ¨ç½² |

#### ğŸ“Š å†…å®¹åº“ (xiaolvshu_content_db) è®¾è®¡ç»†èŠ‚

**content_post è¡¨åˆ†åŒºç­–ç•¥**:
```sql
-- æŒ‰æœˆ RANGE åˆ†åŒº
PARTITION BY RANGE (created_at)

-- è‡ªåŠ¨åˆ†åŒºç¤ºä¾‹
content_post_2025_01  (2025-01-01 ~ 2025-02-01)
content_post_2025_02  (2025-02-01 ~ 2025-03-01)
content_post_2025_03  (2025-03-01 ~ 2025-04-01)
```

**ä¼˜ç‚¹**:
- âœ… æ—¶é—´èŒƒå›´æŸ¥è¯¢è‡ªåŠ¨è£å‰ªåˆ†åŒº(Partition Pruning)
- âœ… å†å²æ•°æ®å¯ç‹¬ç«‹å½’æ¡£/åˆ é™¤
- âœ… æ–°æ•°æ®å†™å…¥åˆ°çƒ­åˆ†åŒº,æ€§èƒ½ç¨³å®š
- âœ… æä¾›è‡ªåŠ¨åˆ›å»ºåˆ†åŒºå‡½æ•°: `create_monthly_partitions('content_post', 6)`

**ç‰©åŒ–è§†å›¾è®¾è®¡**:
```sql
-- çƒ­é—¨å†…å®¹æ’è¡Œæ¦œ(7å¤©å†…,Top1000)
CREATE MATERIALIZED VIEW mv_content_hot_rank AS
SELECT
    post_id, author_id, title, cover_image,
    -- çƒ­åº¦å…¬å¼: ç‚¹èµx2 + è¯„è®ºx3 + åˆ†äº«x5 + æ”¶è—x4 - æ—¶é—´è¡°å‡
    (like_count*2 + comment_count*3 + share_count*5 + collect_count*4)
    * EXP(-æ—¶é—´è¡°å‡å› å­) as hot_score,
    ROW_NUMBER() as rank_num
FROM content_post
WHERE audit_status = 'approved' AND publish_time >= NOW() - INTERVAL '7 days';
```

#### ğŸš€ å®æ–½è·¯çº¿å›¾

**é˜¶æ®µ1ï¼šå½“å‰é˜¶æ®µï¼ˆæ•°æ®é‡ < 100ä¸‡ï¼‰**
- âœ… content å’Œ message å·²ä½¿ç”¨ç‹¬ç«‹æ•°æ®åº“ `xiaolvshu`
- âš ï¸ å»ºè®®ï¼šå°† `xiaolvshu` é‡å‘½åä¸º `xiaolvshu_content`ï¼ˆè§„èŒƒåŒ–ï¼‰
- âš ï¸ å»ºè®®ï¼šåˆ›å»º `xiaolvshu_message` åº“å¹¶è¿ç§» message è¡¨
- âš ï¸ å»ºè®®ï¼šå¯ç”¨ PostgreSQL åˆ†åŒºï¼ˆé›¶æˆæœ¬ä¼˜åŒ–ï¼‰
- âš ï¸ å»ºè®®ï¼šåˆ›å»ºç‰©åŒ–è§†å›¾ `mv_content_hot_rank`

**é˜¶æ®µ2ï¼šä¸­æœŸï¼ˆæ•°æ®é‡ 500ä¸‡ ~ 2000ä¸‡ï¼Œ3-6ä¸ªæœˆåï¼‰**
- å¯ç”¨è¯»å†™åˆ†ç¦»ï¼ˆ`slave` æ•°æ®æºå·²é…ç½®ï¼‰
- åˆ©ç”¨åˆ†åŒºè£å‰ªä¼˜åŒ–æŸ¥è¯¢
- å®šæœŸå½’æ¡£å†å²æ•°æ®ï¼ˆcontent_post ä¿ç•™2å¹´ï¼Œmessage_detail ä¿ç•™1å¹´ï¼‰

**é˜¶æ®µ3ï¼šé•¿æœŸï¼ˆæ•°æ®é‡ > 2000ä¸‡ï¼Œ1-2å¹´åï¼‰**
- content åº“ï¼šå¼•å…¥ ShardingSphere æŒ‰æœˆåˆ†è¡¨
- message åº“ï¼šKafka å¼‚æ­¥å¤„ç† + å†·æ•°æ®å½’æ¡£
- å¯é€‰ï¼šcontent åº“ä¸»ä»åˆ†ç¦»ï¼ˆä¸»å†™ä»è¯»ï¼‰

**æ ‡å‡†3åº“é…ç½®ç¤ºä¾‹**:
```yaml
# content æ¨¡å—
spring:
  datasource:
    dynamic:
      primary: master
      datasource:
        master:
          url: jdbc:postgresql://127.0.0.1:55432/xiaolvshu_content
        slave:
          url: jdbc:postgresql://127.0.0.1:55433/xiaolvshu_content
        # è·¨åº“æŸ¥è¯¢ memberï¼ˆé€šè¿‡ Feign APIï¼Œä¸å»ºè®®ç›´è¿ï¼‰

# message æ¨¡å—
spring:
  datasource:
    dynamic:
      primary: master
      datasource:
        master:
          url: jdbc:postgresql://127.0.0.1:55432/xiaolvshu_message
        slave:
          url: jdbc:postgresql://127.0.0.1:55433/xiaolvshu_message

# system/member/å…¶ä»–æ¨¡å—
spring:
  datasource:
    master:
      url: jdbc:postgresql://127.0.0.1:55432/ruoyi-vue-pro
```

#### âš ï¸ è·¨åº“æŸ¥è¯¢å¤„ç†æ–¹æ¡ˆ

**åœºæ™¯1ï¼šcontent æ¨¡å—éœ€è¦æŸ¥è¯¢ member ç”¨æˆ·ä¿¡æ¯**

```java
// âœ… æ¨èæ–¹æ¡ˆï¼šé€šè¿‡ Feign API è°ƒç”¨ï¼ˆå¾®æœåŠ¡æ ‡å‡†åšæ³•ï¼‰
@FeignClient(name = "member-service", path = "/api/member")
public interface MemberApi {
    @GetMapping("/user/{id}")
    CommonResult<MemberDTO> getMemberInfo(@PathVariable("id") Long userId);
}

// âŒ ä¸æ¨èï¼šé…ç½®è·¨åº“æ•°æ®æºï¼ˆæ€§èƒ½å·®ï¼Œè€¦åˆé«˜ï¼‰
@DS("member")  // åˆ‡æ¢åˆ° member æ•°æ®æº
public MemberDO getMemberByIdFromDB(Long userId) {
    return memberMapper.selectById(userId);
}
```

**åœºæ™¯2ï¼šcontent æ¨¡å—éœ€è¦é¢‘ç¹æŸ¥è¯¢ç”¨æˆ·æ˜µç§°/å¤´åƒ**

```java
// âœ… æœ€ä½³æ–¹æ¡ˆï¼šå†—ä½™ç”¨æˆ·åŸºç¡€ä¿¡æ¯åˆ° content_post è¡¨
// content_post è¡¨å¢åŠ å­—æ®µï¼šauthor_nickname, author_avatar
// ä¼˜ç‚¹ï¼šæ— è·¨åº“æŸ¥è¯¢ï¼Œæ€§èƒ½æœ€ä¼˜
// ç¼ºç‚¹ï¼šç”¨æˆ·æ”¹æ˜µç§°åéœ€å¼‚æ­¥æ›´æ–°å†å²å†…å®¹ï¼ˆé€šè¿‡ MQï¼‰

// å¤‡é€‰æ–¹æ¡ˆï¼šRedis ç¼“å­˜ç”¨æˆ·ä¿¡æ¯
String userInfoKey = "user:info:" + userId;
String userInfoJson = redisTemplate.opsForValue().get(userInfoKey);
if (userInfoJson == null) {
    // è°ƒç”¨ Feign API è·å–å¹¶ç¼“å­˜
    MemberDTO member = memberApi.getMemberInfo(userId).getData();
    redisTemplate.opsForValue().set(userInfoKey, JSON.toJSONString(member), 1, TimeUnit.HOURS);
}
```

**åœºæ™¯3ï¼šmessage æ¨¡å—éœ€è¦ç”¨æˆ·ä¿¡æ¯**

```java
// âœ… æ¨èï¼šæ¶ˆæ¯å‘é€æ—¶å†—ä½™æ˜µç§°åˆ° message_detail
// message_detail å¢åŠ ï¼šsender_nickname, sender_avatar
// ä¼˜ç‚¹ï¼šæ˜¾ç¤ºæ¶ˆæ¯åˆ—è¡¨æ—¶æ— éœ€è·¨åº“æŸ¥è¯¢
```

#### ğŸ› ï¸ åˆ†åº“åçš„è¿ç»´æ³¨æ„äº‹é¡¹

**1. æ•°æ®ä¸€è‡´æ€§**
- content å’Œ message ç‹¬ç«‹åï¼Œæ— è·¨åº“äº‹åŠ¡
- ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆSeataï¼‰æˆ–æœ€ç»ˆä¸€è‡´æ€§ï¼ˆMQï¼‰

**2. æ•°æ®å¤‡ä»½**
```bash
# æ¯æ—¥å¤‡ä»½3ä¸ªåº“
pg_dump xiaolvshu_content > backup_content_$(date +%Y%m%d).sql
pg_dump xiaolvshu_message > backup_message_$(date +%Y%m%d).sql
pg_dump ruoyi-vue-pro > backup_core_$(date +%Y%m%d).sql
```

**3. ç›‘æ§æŒ‡æ ‡**
- content åº“ï¼šQPSã€æ…¢æŸ¥è¯¢ã€è¡¨ç©ºé—´å¤§å°
- message åº“ï¼šè¿æ¥æ•°ã€å†™å…¥å»¶è¿Ÿã€æ¶ˆæ¯ç§¯å‹
- è·¨åº“ API è°ƒç”¨ï¼šFeign è¶…æ—¶ç‡ã€å¤±è´¥ç‡

---

## ğŸ“Š æ•°æ®åº“ä¼˜åŒ–æ–¹æ¡ˆ

### 1. è¡¨æ˜ å°„å†²çªè§£å†³ï¼ˆå·²å®Œæˆâœ…ï¼‰
**é—®é¢˜**ï¼š`ContentDO` å’Œ `ContentPostDO` æ˜ å°„åŒä¸€å¼ è¡¨ `content_post`
- âœ… **å·²åˆ é™¤** `ContentPostDO.java` å’Œ `ContentPostMapper.java`ï¼ˆæ— ä»£ç å¼•ç”¨ï¼‰
- âœ… ç»Ÿä¸€ä½¿ç”¨ `ContentDO`ï¼ˆ50+ å®Œæ•´å­—æ®µï¼‰

### 2. å¿…è¦ç´¢å¼•ï¼ˆç«‹å³æ‰§è¡Œï¼‰
```sql
-- content_post è¡¨ç´¢å¼•
ALTER TABLE content_post ADD INDEX idx_author_status_publish (author_id, status, publish_time DESC);
ALTER TABLE content_post ADD INDEX idx_topic_status (publish_topic_id, status, publish_time DESC);
ALTER TABLE content_post ADD INDEX idx_hot_score (status, hot_score DESC, publish_time DESC);

-- content_comment è¡¨ç´¢å¼•
ALTER TABLE content_comment ADD INDEX idx_content_status (content_id, status, create_time DESC);
ALTER TABLE content_comment ADD INDEX idx_root_parent (root_id, parent_id, create_time DESC);

-- content_interaction è¡¨ç´¢å¼•ï¼ˆé˜²é‡å¤ï¼‰
ALTER TABLE content_interaction ADD UNIQUE INDEX uk_content_user_type (content_id, user_id, interaction_type);
```

### 3. åˆ†è¡¨ç­–ç•¥ï¼ˆ1å¹´å†…æ‰§è¡Œï¼‰

#### è§¦å‘æ¡ä»¶
- æ•°æ®é‡ > 2000ä¸‡è¡Œï¼ˆé¢„è®¡ 1 å¹´è¾¾åˆ°ï¼‰

#### æ¨èæ–¹æ¡ˆï¼šæŒ‰æœˆåˆ†è¡¨ â­
```sql
content_post_202501  -- 2025å¹´1æœˆ
content_post_202502  -- 2025å¹´2æœˆ
content_post_202503  -- 2025å¹´3æœˆ
```

#### æŠ€æœ¯é€‰å‹ï¼šShardingSphere 5.x
- âœ… é›¶ä»£ç æ”¹åŠ¨ï¼ˆé€æ˜ä»£ç†ï¼‰
- âœ… è‡ªåŠ¨è·¯ç”±åˆ†ç‰‡
- âœ… æ”¯æŒè·¨è¡¨æŸ¥è¯¢

**é…ç½®ç¤ºä¾‹**ï¼šè§ `OPTIMIZATION_PLAN.md`

#### åˆ†è¡¨å¯¹è±¡
1. `content_post` - å†…å®¹ä¸»è¡¨
2. `content_comment` - è¯„è®ºè¡¨
3. `content_interaction` - äº’åŠ¨è®°å½•è¡¨ï¼ˆæ•°æ®é‡æœ€å¤§ï¼‰

## ğŸ”’ å®‰å…¨æœºåˆ¶

### èŠ‹é“æ¡†æ¶å·²æœ‰ï¼ˆæ— éœ€é‡å¤å¼€å‘âœ…ï¼‰
- âœ… è®¤è¯æˆæƒï¼ˆSpring Security + Tokenï¼‰
- âœ… XSS é˜²æŠ¤ï¼ˆJsoup è‡ªåŠ¨è¿‡æ»¤ï¼‰
- âœ… CSRF é˜²æŠ¤ï¼ˆToken æœºåˆ¶ï¼‰
- âœ… æ¥å£é™æµï¼ˆ`@RateLimiter` æ³¨è§£ï¼‰
- âœ… API æ—¥å¿—ï¼ˆè‡ªåŠ¨è®°å½•ï¼‰
- âœ… SQL æ³¨å…¥é˜²æŠ¤ï¼ˆMyBatis-Plusï¼‰

### Content æ¨¡å—éœ€å¢å¼ºï¼ˆé«˜ä¼˜å…ˆçº§ğŸ”´ï¼‰

#### 1. æ•æ„Ÿè¯è¿‡æ»¤
```java
// ä½¿ç”¨ DFA ç®—æ³•
@Component
public class SensitiveWordFilter {
    public boolean contains(String text);  // æ£€æµ‹æ•æ„Ÿè¯
    public String filter(String text);     // è¿‡æ»¤æ•æ„Ÿè¯
}
```

#### 2. æ¥å£é™æµç»†åŒ–
```java
// å‘å¸–é™æµï¼š1åˆ†é’Ÿæœ€å¤š5æ¬¡
@RateLimiter(time = 60, count = 5, keyResolver = UserRateLimiterKeyResolver.class)
public void createContent() {}

// ç‚¹èµé™æµï¼š1ç§’æœ€å¤š1æ¬¡
@RateLimiter(time = 1, count = 1, keyResolver = UserRateLimiterKeyResolver.class)
public void likeContent() {}

// è¯„è®ºé™æµï¼š1åˆ†é’Ÿæœ€å¤š10æ¬¡
@RateLimiter(time = 60, count = 10, keyResolver = UserRateLimiterKeyResolver.class)
public void createComment() {}
```

#### 3. è¾“å…¥éªŒè¯å¢å¼º
- æ ‡é¢˜æœ€å¤§ 100 å­—
- å†…å®¹æœ€å¤§ 5000 å­—
- å›¾ç‰‡æœ€å¤š 9 å¼ 
- URL æ ¼å¼éªŒè¯

#### 4. å†…å®¹å®¡æ ¸
- æ•æ„Ÿè¯æ£€æµ‹ï¼ˆæ ‡é¢˜+å†…å®¹ï¼‰
- å›¾ç‰‡é‰´é»„ï¼ˆè°ƒç”¨ç¬¬ä¸‰æ–¹ APIï¼‰
- è‡ªåŠ¨å®¡æ ¸ + äººå·¥å¤å®¡

**å®æ–½è®¡åˆ’**ï¼šè§ `OPTIMIZATION_PLAN.md`

## ğŸ”„ æ›´æ–°è®°å½•
- 2025-10-09ï¼šæ¨èç®—æ³•åŸºç¡€ç‰ˆå®Œæˆï¼ˆP0-2ï¼‰
- 2025-10-09ï¼šElasticsearchæœç´¢å®Œæˆï¼ˆP0-3ï¼‰
- 2025-10-10ï¼šåˆ›å»ºæ¨¡å—MEMORYï¼Œæ¢³ç†å·²å®ç°å’Œå¾…å®Œå–„åŠŸèƒ½
- 2025-10-10ï¼šæ·»åŠ å¹¿å‘Šç³»ç»Ÿã€å†…å®¹åˆ†ç±»ç®—æ³•ã€ä¸¾æŠ¥åŠŸèƒ½å¼€å‘è®¡åˆ’
- 2025-10-16ï¼šâœ… P1ä¿®æ­£ - æ·»åŠ çƒ­æ¨æœºåˆ¶ï¼ˆ2äººå¤©ï¼‰ã€æœç´¢åˆ†ç±»Tabï¼ˆ1.5äººå¤©ï¼‰
- 2025-10-16ï¼šâœ… P2ä¿®æ­£ - æ·»åŠ å›¾æ–‡å®å†µæ¨¡å¼ï¼ˆ2äººå¤©ï¼‰
- 2025-10-27ï¼šâœ… åˆ é™¤ ContentPostDO å†²çªï¼Œæ·»åŠ  MinIO/åˆ†è¡¨/å®‰å…¨ç­–ç•¥è¯´æ˜
- 2025-10-27ï¼šâœ… æ·»åŠ æ•°æ®åº“æ¶æ„è®¾è®¡è¯´æ˜ï¼ˆåŸºäºèŠ‹é“æ¡†æ¶çš„3åº“æ¶æ„ï¼‰
- 2025-11-17ï¼šå†…å®¹äº’åŠ¨è¡¨ deleted å­—æ®µç»Ÿä¸€ä¸º SMALLINT 0/1ï¼ŒContentInteractionDO è‡ªç»´æŠ¤å®¡è®¡å­—æ®µï¼ŒContentServiceImpl åˆå§‹åŒ– createTime/creator/deletedï¼Œä¿®å¤ PostgreSQL boolean/null æ’å…¥å¼‚å¸¸ï¼›è¯¦æƒ…é¡µæ”¹ç”¨ /content/publish/detail å¹¶å‘å‰ç«¯æš´éœ²æµè§ˆ/ä¸‹è½½è®°å½•ã€‚
- 2025-12-06ï¼šâœ… **SQLè„šæœ¬é‡å¤§ä¿®å¤** - ä¿®å¤æ‰€æœ‰ä¸­æ–‡ä¹±ç é—®é¢˜ï¼Œç»Ÿä¸€deletedå­—æ®µä¸ºint2ç±»å‹ï¼ˆèŠ‹é“è§„èŒƒï¼‰ï¼Œè¡¥å…¨content_channel_user/content_user_follow/content_topic_followä¸‰ä¸ªç¼ºå¤±è¡¨ï¼Œç”Ÿæˆå®Œæ•´çš„content_init.sqlåˆå§‹åŒ–è„šæœ¬ï¼ˆ11è¡¨+åˆå§‹æ•°æ®ï¼‰ï¼Œå¤‡ä»½åŸå§‹è„šæœ¬ã€‚è¯¦è§ sql/postgresql/README_SQL_FIX.md


## â³ å¾…å¼€å‘åŠŸèƒ½ï¼ˆå‰ç«¯å¯¹æ¥éœ€è¦ï¼‰

### ğŸŸ¡ P1 - å¹¿å‘Šç³»ç»ŸAPIï¼ˆ1äººå¤©ï¼‰âœ… å‰ç«¯éœ€è¦
**éœ€æ±‚æ¥æº**: å‰ç«¯channel/ad.vueå’Œchannel/list.vueéœ€è¦å¹¿å‘ŠåŠŸèƒ½
**API**: GET /api/v1.0.1/ad/list, POST /api/v1.0.1/ad/click
**æ•°æ®è¡¨**: content_ad, content_ad_click

### ğŸŸ¡ P1 - BBSè®ºå›APIï¼ˆ3äººå¤©ï¼‰âœ… å‰ç«¯éœ€è¦
**éœ€æ±‚æ¥æº**: å‰ç«¯channel/bbs/*.vueéœ€è¦è®ºå›åŠŸèƒ½
**API**: GET /api/v1.0.1/bbs/hot_topics, /bbs/posts, POST /bbs/posts/create
**æ•°æ®è¡¨**: content_bbs_topic, content_bbs_post

### ğŸŸ¡ P1 - é¢‘é“å†…å®¹APIï¼ˆ1äººå¤©ï¼‰âœ… å‰ç«¯éœ€è¦
**éœ€æ±‚æ¥æº**: å‰ç«¯channel/channel.vueéœ€è¦é¢‘é“å†…å®¹åˆ—è¡¨
**API**: GET /api/v1.0.1/channel/content, /channel/ad_list
**åŠŸèƒ½**: æ ¹æ®åœ°åŒºå’Œç±»å‹ç­›é€‰å†…å®¹

è¯¦ç»†è®¾è®¡è§ interface-new/API_STATUS.md
